//· Mixins ···································································¬

@mixin fontMono {
	font-family: var(--fracgui-input_font-family);
	font-size: var(--fracgui-input_font-size);
	font-variation-settings: 'wght' 400;
	text-align: center;
}

// Scrollable

@mixin scrollbar {
	width: 5px;
	height: 0px;
	transition: 0.15s !important;
}

@mixin scrollbarThumb {
	background: var(--fracgui-controller_background);
	border: none;
	transition: 0.15s !important;
}

@mixin scrollbarTrack {
	background: var(--fracgui-folder-header_background);
	border-bottom-right-radius: var(--fracgui-radius-sm);
	// background: inherit;
	transition: 0.15s !important;
}

@mixin scrollable {
	&::-webkit-scrollbar {
		@include scrollbar;
	}

	&::-moz-scrollbar {
		@include scrollbar;
	}

	&::-webkit-scrollbar-thumb {
		@include scrollbarThumb;
	}

	&::-moz-scrollbar-thumb {
		@include scrollbarThumb;
	}

	&::-webkit-scrollbar-track {
		@include scrollbarTrack;
	}
	&::-moz-scrollbar-track {
		@include scrollbarTrack;
	}
}
//⌟

//· Stacking Context ···································································¬

.fracgui-root {
	z-index: 0;
}

.fracgui-header {
	z-index: 2;
}

.fracgui-toolbar {
	z-index: 3;
}
//⌟

//· Open / Close Animations ··················································¬

.fracgui-root,
.fracgui-folder {
	.fracgui-content-wrapper {
		display: grid;
		grid-template-rows: 1fr;

		animation-name: open;
		animation-duration: 0.5s;
		animation-direction: forwards;
		animation-timing-function: cubic-bezier(0.1, 1, 0.1, 1);
	}
	.fracgui-header {
		height: var(--fracgui-header_height);
		max-height: var(--fracgui-header_height);
	}

	&.closed {
		.fracgui-content-wrapper {
			animation-name: close;
			animation-duration: 0.5s;
			animation-fill-mode: forwards;
			animation-timing-function: cubic-bezier(0.05, 1, 0.2, 1);
		}

		.fracgui-folder .fracgui-header {
			max-height: 0;
		}
	}

	&.instant {
		.fracgui-content-wrapper {
			grid-template-rows: 1fr;
			animation: none;
		}

		.fracgui-folder .fracgui-header {
			height: var(--fracgui-header_height);
			max-height: var(--fracgui-header_height);
		}
	}
}

.fracgui-root.closed .fracgui-content {
	transition: opacity 0.1s;
	transition-delay: 0.1s;
	opacity: 0 !important;

	&.instant {
		transition: none;
	}
}

.fracgui-root,
.fracgui-folder {
	&.animating,
	&.closed {
		.fracgui-content {
			overflow: hidden;
			// We need to hide the scrollbar thumb _during_
			// the animation or the browser will jank it up.
			&::-webkit-scrollbar-thumb {
				background: transparent !important;
			}
			@-moz-document url-prefix() {
				& {
					scrollbar-color: transparent transparent;
				}
			}
		}
	}
}

@keyframes reveal {
	from {
		grid-template-rows: 0fr;
	}
	to {
		grid-template-rows: 1fr;
	}
}

@keyframes open {
	from {
		grid-template-rows: 0fr;
	}
	to {
		grid-template-rows: 1fr;
	}
}

@keyframes close {
	from {
		grid-template-rows: 1fr;
	}
	to {
		grid-template-rows: 0fr;
	}
}

//⌟

//· Gui Root ·································································¬

.fracgui-root {
	position: absolute;
	display: flex;
	flex-direction: column;
	inset: 0;

	width: var(--fracgui-root_width);
	min-width: var(--fracgui-root_min-width);
	max-width: var(--fracgui-root_max-width);

	height: fit-content; //- required for animations

	border-radius: var(--fracgui-radius-md);
	filter: var(--fracgui-filter);

	font-family: var(--fracgui-root_font-family);
	font-weight: var(--fracgui-folder-content_font-weight);
	font-size: var(--fracgui-folder-content_font-size);

	user-select: none;
	z-index: 99;
}

.fracgui-root > .fracgui-header {
	position: relative;

	display: flex;
	align-items: center;
	justify-content: space-around;
	gap: 0.5rem;

	width: 100%;
	min-height: var(--fracgui-root-header_height);

	color: var(--fracgui-fg-c);
	background: var(--fracgui-bg-a);
	border-radius: var(--fracgui-radius-md);
	border-bottom-left-radius: var(--fracgui-radius-xs);
	border-bottom-right-radius: var(--fracgui-radius-xs);
	box-shadow: var(--fracgui-root_box-shadow);

	cursor: pointer;
	cursor: grab;

	.fracgui-title {
		width: fit-content;
		height: var(--fracgui-root-header_height);

		// font-family: var(--fracgui-root_font-family);
		font-size: var(--fracgui-root-header_font-size);
		font-weight: var(--fracgui-root-header_font-weight);
		font-variation-settings:
			'wght' var(--fracgui-root-header_font-weight),
			'wdth' 100;
		letter-spacing: var(--fracgui-root-header_letter-spacing);
		line-height: var(--fracgui-root-header_height);

		overflow: hidden;
		white-space: nowrap;
		text-overflow: ellipsis;

		pointer-events: none;
	}
}

.fracgui-root > .fracgui-content-wrapper > .fracgui-content {
	display: flex;
	flex-direction: column;

	width: 100%;
	margin: 0;
	max-height: var(--fracgui-root_max-height);

	border-radius: var(--fracgui-radius-md);
	border-top-left-radius: var(--fracgui-radius-sm);
	border-top-right-radius: var(--fracgui-radius-sm);
	background: var(--fracgui-root-content_background);
	backdrop-filter: blur(var(--fracgui-root_blur));
	outline-offset: -1px;

	box-shadow: 0 0 1.5px 0.5px rgba(var(--fracgui-bg-d-rgb), 0.5) inset;

	overflow-y: scroll;
	overflow-x: hidden;

	scrollbar-gutter: stable;
	@-moz-document url-prefix() {
		& {
			scrollbar-color: var(--fracgui-bg-b) var(--fracgui-bg-a);
			scrollbar-width: thin;
			scrollbar-gutter: auto;
		}
	}

	@include scrollable;

	backface-visibility: hidden;
}

.fracgui-root.animating > .fracgui-content-wrapper > .fracgui-content {
	@-moz-document url-prefix() {
		& {
			overflow: hidden;
		}
	}
}

.fracgui-root > .fracgui-content-wrapper > .fracgui-folder {
	// display: flex;
	padding-right: 0.25rem;
	background: #15161d;
}
//⌟

//· Gui Folders ······························································¬

.fracgui-folder {
	height: fit-content;
	background: var(--fracgui-folder_background);

	&.hidden {
		display: none;
	}
}

.fracgui-folder .fracgui-header {
	position: relative;

	display: flex;
	align-items: center;
	gap: 0.5rem;

	width: 100%;
	padding-left: var(--fracgui-folder-header_padding-left);

	color: var(--fracgui-folder-header-dim_color);
	background: var(--fracgui-folder-header_background);
	outline: var(--fracgui-folder-header_outline, 1px solid rgba(var(--fracgui-bg-b-rgb), 0.5));
	outline-offset: -1px;
	box-shadow: var(--fracgui-folder-header_box-shadow, 0 0 0.1rem #000 inset);

	transition: 0.15s;
	cursor: pointer;

	.fracgui-title {
		width: fit-content;

		// font-family: var(--fracgui-root_font-family);
		font-size: var(--fracgui-folder-header_font-size);
		font-weight: var(--fracgui-folder-header_font-weight);
		letter-spacing: var(--fracgui-folder-header_letter-spacing);
		font-variation-settings:
			'wght' var(--fracgui-folder-header_font-weight),
			'wdth' 100;

		transition: 0.15s;
	}

	.icon-folder-container {
		width: 1.1rem !important;
		height: 1.1rem !important;

		color: var(--fracgui-fg-c);

		opacity: 0.75;
		transition: opacity 0.15s;
	}

	&:hover svg.icon-folder {
		opacity: 1;
	}
}

.fracgui-folder {
	.fracgui-content {
		display: flex;
		flex-direction: column;

		width: 100%;
		background: var(--fracgui-folder-content_background, var(--fracgui-folder_background));
		border-left: var(--fracgui-folder-content_padding-left) solid
			var(--fracgui-folder-header_background);

		transition: 0.15s;
	}
}

.fracgui-folder:hover:not(.fracgui-root) {
	> .fracgui-header {
		color: var(--fracgui-folder-header_color);
		// .fracgui-title {
		// 	font-variation-settings:
		// 		'wght' calc(var(--fracgui-folder-header_font-weight) + 20),
		// 		'wdth' 104;
		// }
	}
	> .fracgui-content {
		opacity: 1;
	}
}

// .fracgui-root > .fracgui-content-wrapper > .fracgui-content > .fracgui-folder {
// 	contain: content;
// }
//⌟

//· Controllers ······························································¬

.fracgui-controller,
.fracgui-controller-text,
.fracgui-controller-switch,
.fracgui-controller-button {
	color: var(--fracgui-controller-dim_color);
	background: var(--fracgui-controller-dim_background);
}

.fracgui-controller {
	width: 100%;

	box-shadow: var(--fracgui-controller_box-shadow);
	border-radius: var(--fracgui-controller_border-radius);
	outline: var(--fracgui-controller_outline);

	&:hover,
	&:focus-visible,
	&:active {
		&:not(:disabled) {
			opacity: 1;
			color: var(--fracgui-controller_color);
			background: var(--fracgui-controller_background);
		}
	}

	transition: 0.15s;
}

.fracgui-controller-button {
	cursor: pointer;

	height: 1.5rem;
	margin: 0;
	padding: 0;

	border: none;
	border-radius: var(--fracgui-controller_border-radius);
	outline: var(--fracgui-controller_outline);
	outline-offset: -1px;
	// prettier-ignore
	box-shadow:
		1px 2px 6px var(--fracgui-shadow-color),
		1px -1px 1px hsla(250, 10%, calc(var(--fracgui-shadow-lightness)), calc(var(--fracgui-shadow-opacity))) inset,
		1px -1px 1px hsla(250, 10%, calc(var(--fracgui-shadow-lightness)), calc(var(--fracgui-shadow-opacity))) inset,
		-0.5px 0.5px 0.5px hsla(250, 10%, 50%, calc(var(--fracgui-shadow-opacity))) inset
	;

	@at-root .fracgui-root[mode='dark'] & {
		outline: none;
	}

	@include fontMono;

	scale: 1;
	backface-visibility: hidden;

	&:hover,
	&:active {
		&:not(:disabled) {
			background: var(--fracgui-controller_background);
			color: var(--fracgui-controller_color);
		}
	}

	&:active {
		scale: 0.975;
		color: var(--fracgui-theme-a);
		transition-duration: 0.075s;

		// prettier-ignore
		box-shadow:
			0px 0px 3px var(--fracgui-shadow-color),
			0px 0px 5px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 3), calc(var(--fracgui-shadow-opacity) / 1)) inset,
			0px 0px 10px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 2), calc(var(--fracgui-shadow-opacity) / 2)) inset,
			0px 0px 20px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 1), calc(var(--fracgui-shadow-opacity) / 2)) inset
		;
	}

	// Disabled
	&:disabled {
		opacity: 0.5;
		cursor: default;
		pointer-events: none;
	}
}

//·· Select ························································¬

$option-height: 1.5rem;
$option-padding: 0.1rem 0.75rem;

.fracgui-controller-select-container {
	position: relative;
}

.fracgui-controller-select-selected {
	border-radius: var(--fracgui-radius-xs);
	outline: 1px solid rgba(var(--fracgui-bg-d-rgb), 0);

	text-align: center;
	letter-spacing: var(--fracgui-folder-content_letter-spacing);

	overflow: hidden;
	transition: 0.15s;
	cursor: pointer;

	&.active,
	&:hover,
	&:focus-visible,
	&:active {
		filter: contrast(1.1) brightness(1.25);
		outline-offset: 0.25rem;
		outline: 1px solid rgba(var(--fracgui-bg-d-rgb), 0.5);
	}

	&.active {
		outline: var(--fracgui-controller_outline);
	}
}

.fracgui-controller-select-dropdown {
	display: none;

	position: absolute;
	display: flex;
	flex-direction: column;

	width: 0px;
	height: 0px;
	padding: 0;
	margin: 0;

	background: var(--fracgui-bg-a);
	border-radius: var(--fracgui-radius);
	box-shadow:
		0px 0.3px 0.3px hsla(var(--fracgui-shadow-lightness), 0.49),
		-0.1px 2.1px 2.2px -0.6px hsla(var(--fracgui-shadow-lightness), 0.47),
		-0.2px 4.6px 4.9px -1.2px hsla(var(--fracgui-shadow-lightness), 0.45),
		-0.4px 9.2px 9.8px -1.7px hsla(var(--fracgui-shadow-lightness), 0.42),
		-0.7px 17.4px 18.5px -2.3px hsla(var(--fracgui-shadow-lightness), 0.4),
		-1.2px 30.6px 32.6px -2.9px hsla(var(--fracgui-shadow-lightness), 0.38);

	z-index: 100;
	transition:
		all 0.2s cubic-bezier(0.23, 1, 0.32, 1),
		inset 0s;

	opacity: 0;
	pointer-events: none;
	transform: translate(0, 0) scaleY(0);
	transform-origin: top center;

	&.expanded {
		display: block;
		width: fit-content;
		height: fit-content;
		padding: 0.1rem;
		opacity: 1;
		transform: translate(0, 0.5rem) scaleY(1);
	}
}

.fracgui-controller-select-option {
	padding: $option-padding;
	line-height: $option-height;

	font-family: var(--fracgui-root_font-family, var(--font-d));
	font-size: 0.8rem;
	letter-spacing: 0.5px;
	color: var(--fracgui-fg-d);

	transition: 0.15s;
	outline: 1px solid rgba(var(--fracgui-bg-d-rgb), 0);

	&:hover,
	&:focus-visible {
		background: var(--fracgui-bg-c);
		filter: contrast(1.1) brightness(1.25);
		outline: 1px solid rgba(var(--fracgui-bg-d-rgb), 1);
		color: var(--fracgui-fg-a);
	}

	cursor: pointer;

	&:first-of-type {
		border-top-left-radius: var(--fracgui-radius-sm);
		border-top-right-radius: var(--fracgui-radius-sm);
	}

	&:last-of-type {
		border-bottom-left-radius: var(--fracgui-radius-sm);
		border-bottom-right-radius: var(--fracgui-radius-sm);
	}
}
//⌟
//⌟

//· Toolbar ···································································¬

.fracgui-toolbar {
	contain: paint;

	position: absolute;
	right: 0;
	top: 0;
	bottom: 0;

	display: flex;
	align-items: center;
	justify-content: flex-end;
	gap: 0.5rem;

	width: 75%;
}

$icon-width: 1.5rem;
$icon-height: 0.9rem;

.fracgui-toolbar-item {
	// outline: red;
	// width: 2rem;
	// height: 1.5rem;

	svg {
		max-height: 1rem;
	}
}

//·· Search ························································¬

//? Container

.fracgui-search-container {
	display: flex;
	align-items: center;
	justify-content: flex-end;
	gap: 0.25rem;

	padding: 0.25rem 0.1rem 0.25rem 0;

	cursor: pointer;
	transition: 0.15s;
	backface-visibility: hidden;
}

//? Button

.fracgui-header:hover .fracgui-search-button {
	opacity: 1;
}

.fracgui-search-button {
	all: unset;

	display: flex;
	align-items: center;

	width: $icon-width;
	height: $icon-height;

	// transition: color 1s, opacity 1s;
	transition: 0.5s;

	svg {
		pointer-events: none;

		path {
			transform: translate(0, 0) scale(1);
			transform-origin: 50% 50%;
			transition-duration: 0.15s;
			transition: transform 0.15s;
		}

		circle {
			fill: transparent;
			transform: translate(0, 0) scale(1);
			transition-duration: 0.15s;
			transition: transform 0.15s;
		}
	}
}

//- Hover

.fracgui-search-button {
	color: var(--fracgui-toolbar-icon-dim_color);
	opacity: 0;
}
.fracgui-search-button:hover {
	color: var(--fracgui-fg-e);
	opacity: 1;

	transition-duration: 0.15s;
}
.fracgui-search-button:active {
	transition-duration: 0.05s;

	background: transparent;
	color: var(--fracgui-fg-d);
	opacity: 1;

	scale: 0.9;
}

//- Active

.fracgui-search-container.active .fracgui-search-button {
	color: var(--fracgui-bg-e);
	opacity: 1;

	path {
		transform: translate(-10%, 10%) scale(0);
		transform-origin: 60% 60%;
	}

	circle {
		fill: var(--fracgui-bg-e);
		transform: translate(-10%, 20%) scale(0.75);
	}
}

//? Input

input.fracgui-search-input {
	width: 6rem;
	height: 1rem;
	padding: 0 0.25rem;

	color: var(--fracgui-fg-c);
	background: var(--fracgui-bg-b);
	border-radius: var(--fracgui-radius-sm);
	box-shadow: 0 0 11px #0004 inset;
	outline: none;
	border: none;

	font-size: var(--fracgui-font-xxs);
	// font-family: var(--fracgui-root_font-family);
	caret-color: var(--fracgui-bg-e);
	caret-shape: block;
	line-height: 4px !important;

	transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);

	@at-root .fracgui-root[mode='light'] & {
		box-shadow: 0 0 4px #0001 inset;
	}
}

//- Active

.fracgui-search-input {
	max-width: 0rem;
	opacity: 0;
	pointer-events: none;
	transition-duration: 1s;
}
.fracgui-search-container.active .fracgui-search-input {
	max-width: 6rem;
	opacity: 1;
	pointer-events: all;
	transition-duration: 0.33s;
}
//⌟

//·· Settings Button ···································································¬

.fracgui-settings-button {
	display: flex;
	align-items: center;
	justify-content: flex-start;
	gap: 0.25rem;

	// all: unset;
	border: none;
	width: 1rem;
	// height: $icon-height;

	margin: 0;
	padding: 0;
	margin-right: 0.5rem;

	color: var(--fracgui-toolbar-icon-dim_color);
	background: none;

	cursor: pointer;
	transition: 0.15s;

	&:hover {
		color: var(--fracgui-toolbar-icon_color);
	}

	.gear,
	.dot-left,
	.dot-center,
	.dot-right {
		transition: 0.5s cubic-bezier(0.16, 0.9, 0, 1.01);
		transform-origin: center;
		pointer-events: none;
	}

	.gear {
		transition:
			all 0.5s cubic-bezier(0.16, 0.9, 0, 1.01),
			transform 0.33s cubic-bezier(0, 1.07, 0.48, 1.27);
		opacity: 0;
		transform: scale(1.33) rotate(-180deg);
	}
	&:hover .gear {
		transition: 0.5s cubic-bezier(0.16, 0.9, 0, 1.01);
	}
	&.open .gear {
		transition: 0.33s cubic-bezier(0, 1.07, 0.48, 1.5);
	}
	.dot-left {
		opacity: 1;
		transform: translateX(0);
	}
	.dot-center {
		opacity: 1;
	}
	.dot-right {
		opacity: 1;
		transform: scale(1) translateX(0);
	}

	// ಠ_ಠ
	$x: /*(^_^)⊃✨*/ 36%;

	&:hover,
	&.open {
		.gear {
			opacity: 1;
			transform: scale(1) rotate(0deg);
		}

		.dot-left {
			opacity: 0;
			transform: translateX($x);
		}

		.dot-center {
			// filter: brightness(0.75);
			transform: scale(1.25);
		}

		.dot-right {
			opacity: 0;
			transform: scale(1.2) translateX(-$x);
		}
	}

	&.open {
		// .dot-center {
		// 	fill: none;
		// 	stroke: var(--fracgui-toolbar-icon_color);
		// }
		.gear {
			opacity: 1;
			transform: scale(1) rotate(58deg);
		}

		// .dot-center {
		// 	stroke: var(--fracgui-toolbar-icon-dim_color);
		// }
	}

	&:active {
		background: none;
	}
}

//⌟
//⌟

//· Shared ···································································¬

//·· Copy ··························································¬

.fracgui-folder {
	.copy-button {
		cursor: pointer;

		// width: var(--copy-button-width, 2rem);
		height: 2rem;
		padding: 10%;

		color: var(--fracgui-fg-a);
		background: rgba(var(--fracgui-bg-a-rgb), 0);
		outline: 1px solid transparent;
		border-radius: 0.2rem;
		backdrop-filter: blur(0px);

		transition-property: all, background, color;
		transition-delay: 0s, 1s, 0.75s;
		transition-duration: 0.25s, 0.5s;

		&:not(.active, .outro) {
			&:hover {
				color: var(--fracgui-fg-b);
				backdrop-filter: blur(2px);
				background: rgba(var(--fracgui-bg-a-rgb), 0.75);

				transition-duration: 0.15s, 0.25s;
				transition-delay: 0s;
			}

			&:active,
			&:focus {
				color: var(--fracgui-fg-c);
				background: var(--fracgui-bg-c);
			}
		}

		&.active,
		&.outro {
			color: var(--fracgui-fg-a);
			outline-color: transparent !important;
			background: rgba(var(--fracgui-bg-a-rgb), 0);
			opacity: 1 !important;

			transition-delay: 0s;
			transition-duration: 0.25s;
		}

		font-size: 0.8rem;
		font-family: var(--fracgui-input_font-family);
	}

	.copy-button-svg-container {
		align-items: center;
		justify-content: center;

		width: 100%;
		height: 100%;

		grid-area: 1/1;
	}

	$dur: 0.33s;
	$bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
	$bounceXtreme: cubic-bezier(0.2, 2, 0.2, 0.85);
	$quintInOut: cubic-bezier(0.86, 0, 0.07, 1);
	$quartInOut: cubic-bezier(0.77, 0, 0.175, 1);
	svg {
		overflow: visible;

		width: 100%;
		height: 100%;

		.front,
		.back,
		.check {
			transform-origin: 50% 50%;
		}

		.front {
			transition-duration: 0.66s !important;
			transition-timing-function: $bounce;

			stroke: currentColor;
		}
		&.active .front {
			transition-timing-function: $bounceXtreme;
			transition-duration: 0.2s;

			transform: scale(2);
			fill: #12a084 !important;
			stroke: #12a084 !important;
		}

		&.outro .front {
			transition-duration: 0.5s !important;
		}

		.back {
			opacity: 1;
			transform: translate(0, 0);
			transition-duration: $dur;
			transition-timing-function: $quartInOut;
		}
		&.active .back {
			opacity: 0;
			transform: translate(15%, 15%);
		}

		&.outro .back {
			transition:
				opacity 0.25s 0.25s,
				transform 1s 0s;
		}

		.check {
			stroke: var(--fracgui-light-a);

			opacity: 0;

			transform: scale(0);

			transition: 0.2s $bounce 0s;
		}
		&.active .check {
			opacity: 1;
			transform: scale(1.25);

			transition: 0.3s $bounceXtreme 0.1s;
		}
	}
}
//⌟
//⌟

//· Inputs ···································································¬

.fracgui-input-drawer-toggle {
	right: 0.5rem;
	top: 0.5rem;

	min-width: 0.33rem;
	height: 75%;

	color: var(--fracgui-fg-c);
	background: var(--fracgui-drawer-toggle_background);
	transition: 0.15s;
	box-shadow: -1px 0 1px 0.5px rgba(var(--fracgui-bg-a-rgb), 0.5) inset;

	border-top-right-radius: var(--fracgui-radius-sm);
	border-bottom-right-radius: var(--fracgui-radius-sm);

	cursor: pointer;

	&:hover {
		background: var(--fracgui-bg-c);
	}
}

.fracgui-input-title {
	// outline: 1px solid hsla(120, 100%, 25%, 0.2); // debug-outline

	max-width: var(--fracgui-input-section-1_width);
	min-width: var(--fracgui-input-section-1_width);
	text-wrap: balance;
	padding-left: 0.5rem;

	letter-spacing: var(--fracgui-folder-content_letter-spacing);

	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;

	transition: 0.05s;
}

.fracgui-input-container {
	position: relative;
	display: flex;
	align-items: center;

	width: 100%;
	height: 0%;
	min-height: var(--fracgui-input_height);

	// color: var(--fracgui-input-container_color);
	// background: var(--fracgui-input-container_background);
	// todo - thought... if every customizable property assumes a default variable of the same name,
	// todo - then it would be much simpler to override at runtime in the themer / user options
	color: var(--fracgui-input-container_color);
	background: var(--fracgui-input-container_background);

	outline: var(--fracgui-input-container_outline);
	box-shadow: var(--fracgui-input-container_box-shadow);

	transition:
		all 0.15s,
		opacity 0.15s ease-in 0.2s;

	$inverted-border-size: 0.5rem;
	$inverted-border-radius: 0.2rem;
	$inverted-border-radius-bottom: 0.1rem;

	&:first-of-type {
		border-top-left-radius: var(--fracgui-radius-sm);
		border-top-right-radius: var(--fracgui-radius-sm);

		// top left corner
		&::before {
			content: '';
			position: absolute;
			background-color: transparent;
			bottom: $inverted-border-size * 2;
			width: $inverted-border-size;
			height: $inverted-border-size * 2;
			border-top-left-radius: $inverted-border-radius;
			box-shadow: 0 -#{$inverted-border-size} 0 0 var(--fracgui-bg-a);

			clip-path: inset(0 0 0 0);
			opacity: 1;
			transition: inherit;
		}
		// top right corner
		&::after {
			content: '';
			position: absolute;
			background-color: transparent;
			right: 0;
			bottom: $inverted-border-size * 2;
			width: $inverted-border-size;
			min-height: $inverted-border-size * 2;
			border-top-right-radius: $inverted-border-radius;
			box-shadow: 0 -#{$inverted-border-size} 0 0 var(--fracgui-bg-a);

			clip-path: inset(0 0 0 0);
			opacity: 1;
			transition: inherit;
		}
	}

	@at-root .fracgui-folder:not(:last-of-type) .fracgui-input-container:last-of-type {
		// &:last-of-type {
		border-bottom-left-radius: var(--fracgui-radius-sm);
		border-bottom-right-radius: var(--fracgui-radius-sm);

		// bottom left corner
		&::before {
			content: '';
			position: absolute;
			background-color: transparent;
			top: $inverted-border-size * 2;
			height: $inverted-border-size * 2;
			width: $inverted-border-size;
			border-bottom-left-radius: $inverted-border-radius-bottom;
			box-shadow: 0 $inverted-border-size 0 0 var(--fracgui-bg-a);
			clip-path: inset(0 0 0 0);
		}
		// bottom right corner
		&::after {
			content: '';
			position: absolute;
			background-color: transparent;
			right: 0;
			top: $inverted-border-size * 2;
			height: $inverted-border-size * 2;
			width: $inverted-border-size;
			border-bottom-right-radius: $inverted-border-radius-bottom;
			box-shadow: 0 $inverted-border-size 0 0 var(--fracgui-bg-a);
			clip-path: inset(0 0 0 0);
		}
	}

	&:hover {
		color: var(--fracgui-fg-b);
	}

	&:has(input:active),
	&:has(.fracgui-controller:active) {
		.fracgui-controller-number {
			opacity: 1;
			background: var(--fracgui-controller_background);
		}

		.fracgui-input-title {
			color: var(--fracgui-theme-a);
		}
	}

	&.fracgui-search-hit {
		min-height: var(--fracgui-input_height);

		.fracgui-input-title {
			color: var(--fracgui-theme-a);
		}
	}

	&.fracgui-search-miss {
		min-height: 0rem;
		overflow: hidden;

		&::after {
			opacity: 0;
			transition: inherit;
		}
		&::before {
			opacity: 0;
			transition: inherit;
		}
	}

	&.expanded {
		.fracgui-input-container {
			min-height: unset;
		}
	}

	.fracgui-input-content {
		display: flex;
		align-items: center;
		justify-content: space-evenly;

		width: 100%;
		margin: 0;
		padding-right: 0.75rem;

		//? Number Input

		.fracgui-input-number-container {
			position: relative;

			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 0.5rem;

			width: 100%;
			height: 90%;

			border-radius: var(--fracgui-radius-sm);

			.fracgui-input-number-buttons-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: space-between;

				width: 2rem;
				height: 1.5rem;
				margin: 0;
				padding: 0;

				.fracgui-input-number-button {
					cursor: pointer;

					display: flex;
					align-items: center;
					justify-content: center;

					width: 90%;
					height: 45%;

					outline: none;
					opacity: 0.5;

					border: none;
					border-radius: var(--fracgui-radius-xs);
					box-shadow: none;

					transition: 0.15s;

					svg {
						width: 1rem;
						height: 1rem;

						color: var(--fracgui-fg-d);
						opacity: 0.1;

						scale: 1;
						transition: 0.15s;

						user-select: none;
						pointer-events: none;
					}

					&:hover {
						box-shadow: 0px 0px 1px 0px hsl(0, 0%, 0%) inset;
						@at-root .fracgui-root[mode='light'] & {
							box-shadow: 0px 0px 1px 0px hsl(0, 0%, 100%) inset;
						}
						opacity: 1;

						svg {
							opacity: 1;
						}
					}

					&:active {
						opacity: 1;
						box-shadow: 0px 0px 1px 1px hsl(0, 0%, 5%) inset;
						@at-root .fracgui-root[mode='light'] & {
							box-shadow: 0px 0px 2px 1px hsl(0, 0%, 90%) inset;
						}

						svg {
							opacity: 1;
							color: var(--fracgui-theme-a);
							//? svg shadow glow.
							filter: drop-shadow(0 0 3px var(--fracgui-theme-a));
						}
					}
				}

				.fracgui-input-number-buttons-increment {
					border-top-left-radius: var(--fracgui-radius);
					border-top-right-radius: var(--fracgui-radius);
				}
				.fracgui-input-number-buttons-decrement {
					border-bottom-left-radius: var(--fracgui-radius);
					border-bottom-right-radius: var(--fracgui-radius);
				}
			}
		}

		//- Range <input>

		input.fracgui-input-number-range {
			-webkit-appearance: none;
			appearance: none;

			width: 100%;
			height: 0.5rem;

			accent-color: var(--fracgui-input-number-range_color);
			background: var(--fracgui-input-number-range_background);
			border-radius: var(--fracgui-radius-xs);
			box-shadow: var(--fracgui-input-number-range_box-shadow);
			outline: var(--fracgui-input-number-range_outline);

			opacity: 0.7;
			transition: 0.15s;

			overflow: visible;
			min-width: 1rem;

			&:hover {
				opacity: 1;
			}
			&:active {
				// background: rgba(var(--fracgui-theme-a-rgb), 0.1);
				background: color-mix(
					in lch,
					var(--fracgui-theme-a),
					var(--fracgui-input-number-range_background)
				);
			}

			@mixin rangeThumb {
				-webkit-appearance: none;
				appearance: none;

				width: 0.5rem;
				height: 1rem;

				background: var(--fracgui-input-number-range_color);
				border-radius: var(--fracgui-radius-xs);
				border: none;

				transition: 0.15s;

				cursor: pointer;
				z-index: 10;
			}
			&::-webkit-slider-thumb {
				@include rangeThumb;
			}
			&::-moz-range-thumb {
				@include rangeThumb;
			}

			@mixin rangeThumbActive {
				background: var(--fracgui-theme-a);
				box-shadow: 0 0 20px var(--fracgui-theme-a);
				opacity: 1;
			}
			&:active {
				&::-webkit-slider-thumb {
					@include rangeThumbActive;
				}
				&::-moz-range-thumb {
					@include rangeThumbActive;
				}
			}

			@mixin rangeTrack {
				-webkit-appearance: none;
				-moz-appearance: none;
				appearance: none;

				border-radius: var(--fracgui-radius-sm);
				border: none;
				cursor: pointer;
				z-index: 9;
			}
			&::-moz-range-track {
				@include rangeTrack;
			}
			&::-webkit-slider-runnable-track {
				@include rangeTrack;
			}
		}

		//- Text and Number <input>

		.fracgui-controller-number,
		.fracgui-controller-text {
			-webkit-appearance: textfield;
			-moz-appearance: textfield;
			appearance: textfield;

			width: 100%;
			min-width: 2rem;
			max-width: var(--fracgui-input-section-2_width);
			height: 1.25rem;

			border: none;
			outline: var(--fracgui-controller_outline);

			@include fontMono;

			transition: 0.15s;
			overflow: visible;

			&::-webkit-inner-spin-button,
			&::-webkit-outer-spin-button {
				-webkit-appearance: none;
				-moz-appearance: none;
				appearance: none;
				display: none;
			}

			&.dragging {
				outline: 1px solid rgba(var(--fracgui-theme-a-rgb), 0.5);
				box-shadow: 0 0 0.75rem rgba(var(--fracgui-theme-a-rgb), transparent 0.33);
			}
		}

		//? Text Input

		.fracgui-input-text-container {
			display: flex;
			flex-direction: column;
			justify-content: center;
			gap: 0.25rem;

			width: 100%;
			height: 100%;

			.fracgui-controller-text {
				width: 100%;
				max-width: unset;
				height: 1.25rem;

				// color: var(--fracgui-controller-dim_color);
				// color: color-mix(
				// 	in lch,
				// 	var(--fracgui-controller_color),
				// 	var(--fracgui-controller-dim_color)
				// );
				// background: var(--fracgui-controller-dim_background);
				// background-image: var(--fracgui-controller_background-image);
				// box-shadow: var(--fracgui-input-content_box-shadow);
				// border-radius: var(--fracgui-radius-sm);

				border: none;
				outline: var(--fracgui-controller_outline);

				@include fontMono;
				text-align: start;
				padding-left: 0.5rem;

				transition: 0.15s;
				overflow: visible;

				&:hover {
					color: var(--fracgui-controller_color);
					background: var(--fracgui-controller_background);
				}
			}
		}

		//? Color Input

		.fracgui-input-color-container {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			gap: 0.75rem;

			width: 100%;
			margin: 0.25rem 0;

			//- Current Color

			.fracgui-input-color-current-color-container {
				position: relative;

				.copy-button {
					position: absolute;
					top: -5px;
					right: -7px;

					height: 1.15rem;
					padding: 3px;
					background: none !important;

					color: var(--fracgui-fg-d);
					filter: brightness(0.75) contrast(0.8);
					backdrop-filter: none;
					svg {
						.back {
							fill: var(--fracgui-fg-d);
							stroke: var(--fracgui-fg-d);
						}
					}
					&:hover {
						filter: brightness(1) contrast(1);
						backdrop-filter: none;
						color: var(--fracgui-fg-a);
						svg {
							.back {
								fill: var(--fracgui-fg-a);
								stroke: var(--fracgui-fg-a);
							}
						}
					}

					opacity: 0;
					z-index: 10;
				}

				&:hover {
					.copy-button {
						opacity: 1;
					}
				}
			}

			.fracgui-input-color-current-color-background {
				$size: 8px;
				$size2: $size * 2;
				$color: var(--fracgui-bg-a);

				width: var(--fracgui-input-section-2_width);
				min-width: var(--fracgui-input-section-2_width);
				height: 1.5rem;

				background-image: linear-gradient(45deg, $color 25%, transparent 25%),
					linear-gradient(-45deg, $color 25%, transparent 25%),
					linear-gradient(45deg, transparent 75%, $color 75%),
					linear-gradient(-45deg, transparent 75%, $color 75%);
				background-size: $size2 $size2;
				background-position:
					0 0,
					0 $size,
					$size (-$size),
					(-$size) 0px;
				border-radius: var(--fracgui-radius-sm);
				overflow: hidden;

				cursor: pointer;

				// clip-path: inset(.25rem 0 .25rem 0);
				clip-path: xywh(0 12% 100% 72% round var(--fracgui-radius-sm));
			}

			.fracgui-input-color-current-color-display {
				height: 100%;
			}

			//? Body

			.fracgui-input-color-body {
				position: relative;
				display: flex;
				flex-direction: column;
				justify-content: center;
				// gap: 0.5rem;

				min-width: 0;
				width: var(--fracgui-input-section-3_width);

				//- Canvas

				.fracgui-input-color-picker-container {
					position: relative;
					display: flex;
					flex-direction: column;
					gap: 0.25rem;

					.fracgui-input-color-picker-canvas {
						display: flex;

						width: 100%;
						height: 3rem;

						border-radius: var(--fracgui-radius);

						cursor: pointer;
						overflow: hidden;
					}

					.fracgui-input-color-picker-handle {
						position: absolute;
						top: 0;
						left: 0;

						width: 0.5rem;
						height: 0.5rem;
						translate: -50% -50%;

						border-radius: 50%;
						border: 1px solid var(--fracgui-fg-a);
						box-shadow: 0 0 0.25rem 0rem var(--fracgui-bg-d);
						opacity: 0;

						transition-property: all, opacity;
						transition-delay: 0s, 0s;
						transition-duration: 0.2s, 0.33s;
						transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);

						pointer-events: none;
					}

					&.expanded {
						// margin-bottom: 0.25rem;

						.fracgui-input-color-picker-handle {
							opacity: 1;
							transition-delay: 0s, 0.25s;
						}
					}

					//- Hue Slider

					@mixin rangeThumb {
						appearance: none;

						width: 0.25rem;
						height: 0.5rem;
						padding: 0;

						background-color: var(--fracgui-input-number-range_color);
						border: none;

						transition: 0.15s;

						cursor: pointer;
						z-index: 10;
					}

					.fracgui-input-color-picker-hue {
						appearance: none;

						width: 99%;
						border-radius: var(--fracgui-radius-sm);
						background: none;
						height: 0.5rem;

						&::-webkit-slider-thumb {
							@include rangeThumb;
						}
						&::-moz-range-thumb {
							@include rangeThumb;
						}

						@mixin rangeTrack {
							appearance: none;

							background: linear-gradient(
								to right,
								hsl(0, 100%, 50%),
								hsl(60, 100%, 50%),
								hsl(120, 100%, 50%),
								hsl(180, 100%, 50%),
								hsl(240, 100%, 50%),
								hsl(300, 100%, 50%),
								hsl(360, 100%, 50%)
							);

							border-radius: var(--fracgui-radius-sm);
							border: none;
							cursor: pointer;
							z-index: 1;
							background-color: none;
						}
						&::-webkit-slider-runnable-track {
							@include rangeTrack;
						}
						&::-moz-range-track {
							@include rangeTrack;
						}
					}

					//- Alpha Slider

					.fracgui-input-color-picker-alpha {
						appearance: none;

						width: 99%;
						border-radius: var(--fracgui-radius-sm);
						background-color: transparent;

						&::-webkit-slider-thumb {
							@include rangeThumb;
						}
						&::-moz-range-thumb {
							@include rangeThumb;
						}

						&::-webkit-slider-runnable-track {
							appearance: none;

							background: linear-gradient(to right, transparent, currentColor);

							border-radius: var(--fracgui-radius-sm);
							border: none;
							cursor: pointer;
							z-index: 1;
						}
						&::-moz-range-track {
							appearance: none;

							background: linear-gradient(to right, transparent, currentColor);

							border-radius: var(--fracgui-radius-sm);
							border: none;
							cursor: pointer;
							z-index: 1;
						}
					}
				}

				//- RGB Components

				.fracgui-input-color-components-container {
					display: flex;
					align-items: center;
					// height: 1.5rem;
					gap: 0.75rem;

					.fracgui-input-color-components-text {
						position: absolute;
						left: 2.25rem;
						max-width: 5rem;

						opacity: 0;
						transform: translateX(-0.5rem);
						pointer-events: none;
						&.visible {
							opacity: 1;
							transform: translateX(0);
							pointer-events: all;
						}
					}

					.fracgui-input-color-components-select-container {
						width: 2rem;

						color: var(--fracgui-fg-d);
						@at-root .fracgui-root[mode='light'] & {
							color: var(--fracgui-bg-e);
						}

						font-size: var(--fracgui-font-xs);
						font-family: var(--fracgui-input_font-family);

						span {
							transition: 0.4s;
							text-shadow: 0 0 0 transparent;
						}

						.fracgui-controller-select-selected {
							font-size: var(--fracgui-font-xxs);
						}
					}

					&:has(input.a.hovering) {
						.fracgui-input-color-components-select-container span.a {
							color: var(--fracgui-fg-a);
						}
					}
					&:has(input.a.dragging) {
						.fracgui-input-color-components-select-container span.a {
							color: var(--fracgui-theme-a);
							text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
						}
					}

					&:has(input.b.hovering) {
						.fracgui-input-color-components-select-container span.b {
							color: var(--fracgui-fg-a);
						}
					}
					&:has(input.b.dragging) {
						.fracgui-input-color-components-select-container span.b {
							color: var(--fracgui-theme-a);
							text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
						}
					}

					&:has(input.c.hovering) {
						.fracgui-input-color-components-select-container span.c {
							color: var(--fracgui-fg-a);
						}
					}
					&:has(input.c.dragging) {
						.fracgui-input-color-components-select-container span.c {
							color: var(--fracgui-theme-a);
							text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
						}
					}

					&:has(input.d.hovering) {
						.fracgui-input-color-components-select-container span.d {
							color: var(--fracgui-fg-a);
						}
					}
					&:has(input.d.dragging) {
						.fracgui-input-color-components-select-container span.d {
							color: var(--fracgui-theme-a);
							text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
						}
					}

					.fracgui-input-color-components-numbers-container {
						display: flex;
						align-items: center;
						justify-content: space-between;
						gap: 0.25rem;

						width: 90%;

						.fracgui-controller-number {
							height: 1.25rem;
							max-width: unset;

							transition: 0.15s;

							overflow: visible;

							opacity: 0;
							transform: translateX(-0.5rem);
							pointer-events: none;
							&.visible {
								opacity: 1;
								transform: translateX(0);
								pointer-events: all;
							}
						}
					}
				}
			}
		}

		//? Button Input

		.fracgui-input-button-container {
			display: flex;
			align-items: center;
			justify-content: center;

			width: 100%;
			height: 100%;
		}

		//? Switch Input
		.fracgui-input-switch-container {
			position: relative;

			display: flex;
			align-items: center;
			justify-content: flex-start;
			gap: 0.5rem;

			width: 100%;
			height: 100%;
			height: var(--fracgui-input_height);

			// border-radius: unset;

			$w: var(--fracgui-input-section-1_width);
			// $w: 8rem;
			$tw: 1.5rem;

			.fracgui-controller-switch {
				position: relative;
				display: flex;
				align-items: center;
				justify-content: space-between;

				height: 66%;
				width: calc($w * 0.6);
				margin: 0;
				padding: 0;

				border-radius: var(--fracgui-radius-sm);
				overflow: hidden;
				// contain: none;
				border: none;
				outline: none;

				transition-duration: 0.25s;
				transition-timing-function: cubic-bezier(0.01, 1.06, 0.8, 1.01);

				&:hover,
				&:focus-visible {
					&:not(:disabled) {
						color: var(--fracgui-controller_color);
						// background: var(--fracgui-controller_background);
					}
				}

				box-shadow:
					-1px 1px 7px 0px #000f inset,
					-1px 1px 1px 0px #000c inset;
				// background: var(--fracgui-controller-dim_background);
				background: var(--fracgui-input-number-range_background);
				background-image: radial-gradient(
					circle at 25% 50% in lab,
					var(--fracgui-theme-a) 0%,
					rgba(var(--fracgui-theme-a-rgb), 0.5) 3%,
					rgba(var(--fracgui-theme-a-rgb), 0.2) 10%,
					rgba(var(--fracgui-theme-a-rgb), 0.15) 20%,
					rgba(var(--fracgui-theme-a-rgb), 0.1) 30%,
					rgba(var(--fracgui-theme-a-rgb), 0.1) 50%,
					var(--fracgui-input-number-range_background) 100%
						// var(--fracgui-controller-dim_background) 100%
				);

				@at-root .fracgui-root[mode='light'] & {
					box-shadow:
						-1px 1px 7px 0px #0002 inset,
						-1px 1px 1px 0px #0002 inset;

					background-image: radial-gradient(
						circle at 25% 50% in lab,
						var(--fracgui-theme-a) 3%,
						rgba(var(--fracgui-theme-a-rgb), 0.4) 3%,
						rgba(var(--fracgui-theme-a-rgb), 0.3) 10%,
						rgba(var(--fracgui-theme-a-rgb), 0.2) 20%,
						rgba(var(--fracgui-theme-a-rgb), 0.1) 30%,
						rgba(var(--fracgui-theme-a-rgb), 0.05) 50%,
						var(--fracgui-input-number-range_background) 100%
							// var(--fracgui-controller-dim_background) 100%
					);
				}

				opacity: 0.7;
				&:hover {
					opacity: 1;
				}

				&:after {
					content: '';
					position: absolute;
					top: 0;
					left: 0;

					width: 100%;
					height: 100%;

					// background: var(--fracgui-controller-dim_background);
					background: var(--fracgui-input-number-range_background);
					box-shadow:
						-1px 1px 7px 0px #000c inset,
						-1px 1px 1px 0px #000c inset;
					@at-root .fracgui-root[mode='light'] & {
						box-shadow:
							-1px 1px 7px 0px #0002 inset,
							-1px 1px 1px 0px #0002 inset;
					}

					opacity: 1;

					transition: 0.33s;
				}

				&.active:after {
					opacity: 0;
				}

				.fracgui-controller-switch-thumb,
				.fracgui-controller-switch-left,
				.fracgui-controller-switch-right {
					transition-duration: 0.25s;
					transition-timing-function: cubic-bezier(0.01, 1.06, 0.8, 1.01);
				}

				//? Thumb
				.fracgui-controller-switch-thumb {
					display: flex;
					position: absolute;
					right: 0.25rem;

					width: $tw;
					min-height: 66%;

					background: var(--fracgui-controller_background);
					border: 1px solid var(--fracgui-input-dim_color);
					border-radius: var(--fracgui-radius-xs);
					box-shadow:
						0px 0px #a6a7ad69,
						1px -1px 0px #0002 inset;

					box-sizing: border-box;
					overflow: hidden;
					z-index: 2;
				}

				//- Positioning
				.fracgui-controller-switch-thumb {
					right: calc(100% - $tw - 0.25rem);
				}
				&.active {
					.fracgui-controller-switch-thumb {
						right: 10%;
						box-shadow:
							-2px 0px #00000069,
							-2px 0px rgba(var(--fracgui-theme-a-rgb), 0.1),
							1px -1px 1px #0002 inset;

						@at-root .fracgui-root[mode='light'] & {
							box-shadow:
								-2px 0px #a6a7ad69,
								1px -1px 1px #0002 inset;
						}
					}
				}
			}
		}
	}

	&:has(.fracgui-input-buttongrid-container) {
		height: unset;
	}

	.fracgui-input-content {
		//? ButtonGrid Input
		.fracgui-input-buttongrid-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			$gap: 0.2rem 2rem;
			gap: $gap;

			width: 100%;
			padding: 0.25rem 0;

			.fracgui-controller-buttongrid-row {
				display: flex;
				gap: $gap;

				width: 100%;
			}

			.fracgui-controller-buttongrid-button {
				&.active {
					background: var(--fracgui-controller_background);
					color: var(--fracgui-controller_color);
					color: var(--fracgui-theme-a);

					font-variation-settings: 'wght' 800;
					// outline: 1px solid var(--fracgui-controller-active_background);
				}
				@at-root .fracgui-root[mode='light'] & {
					background: var(--fracgui-controller-dim_background);
					color: var(--fracgui-controller_color);
					&.active {
						color: var(--fracgui-theme-a);
						background: var(--fracgui-bg-e);
					}
				}
			}
		}
	}

	//* Accents for when an input's content section is hovered over.

	&:hover {
		.fracgui-controller-number {
			background: var(--fracgui-controller_background);
		}

		.fracgui-input-number-container {
			.fracgui-input-number-buttons-container {
				.fracgui-input-number-button {
					opacity: 1;
					background: var(--fracgui-controller_background);
				}
			}
		}

		.fracgui-controller-number {
			color: var(--fracgui-fg-b);
		}

		input.fracgui-input-number-range::-webkit-slider-thumb {
			background-color: var(--fracgui-bg-d);
			transition: 0.15s;
			opacity: 1;

			&:active {
				background-color: var(--fracgui-theme-a);
			}
		}
	}

	.fracgui-input-content {
		//
		//? Select Input

		.fracgui-input-select-container {
			width: 100%;
			height: 100%;

			font-size: var(--fracgui-font-xs);
			// font-family: var(--fracgui-root_font-family);

			.fracgui-controller-select-selected {
				line-height: 1.25rem;
				height: 1.25rem;

				background: var(--fracgui-controller-dim_background);
				border-radius: var(--fracgui-radius-xs);
				outline: var(--fracgui-controller_outline);

				//? chevron icon
				&::before {
					content: '\276F';
					position: absolute;
					top: 0;
					right: 0.5rem;

					margin: auto;

					color: var(--fracgui-bg-d);
					transform: rotate(90deg) translateX(0);
					transition: 0.2s;
				}

				filter: unset;

				&.active,
				&:hover,
				&:focus-visible,
				&:active {
					background: var(--fracgui-controller_background);
					outline-offset: 0rem;
					&::before {
						color: var(--fracgui-bg-e);
					}
				}
				&.active {
					outline: var(--fracgui-controller_outline);

					&::before {
						color: var(--fracgui-fg-d);
						transform: rotate(90deg) translateX(2px);
					}
				}
			}

			// The dropdown portals to the body to escape the root's containment clipping.
			@at-root body {
				@keyframes dropdown {
					from {
						transform: translateY(0rem);
					}
					to {
						transform: translateY(0.25rem);
					}
				}

				.fracgui-controller-select-dropdown {
					transform: translateY(0);
					&.expanded {
						animation: dropdown 0.15s forwards;
					}

					// todo - We can't use the theme vars (cus portal).  Will need to fix this.
					// background: var(--fracgui-controller_background);
					// backdrop-filter: blur(var(--fracgui-root-blur));
					// .fracgui-controller-select-option:hover {
					// background: var(fracgui-input-dim_background);
					// }

					color: var(--fracgui-light-a);
					background: color-mix(in lch, var(--fracgui-dark-a) 60%, transparent);
					backdrop-filter: blur(5px);
					outline: 1px solid;
					outline-color: var(--fracgui-dark-b);

					.fracgui-controller-select-option:hover {
						color: var(--fracgui-light-a);
						background: color-mix(in lch, var(--fracgui-dark-c), transparent);
						outline-color: var(--fracgui-dark-b);
					}
				}
				&:has(.fracgui-root[mode='light']) {
					.fracgui-controller-select-dropdown {
						color: var(--fracgui-dark-b);
						background: color-mix(in lch, var(--fracgui-light-a) 60%, transparent);
						outline-color: var(--fracgui-light-b);

						.fracgui-controller-select-option:hover {
							color: var(--fracgui-dark-a);
							background: color-mix(in lch, var(--fracgui-light-d) 60%, transparent);
							outline-color: var(--fracgui-light-d);
						}
					}
				}
			}
		}
	}
}

//⌟
